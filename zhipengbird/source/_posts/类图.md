---
title: 类图
date: 2018-08-26 09:36:53
tags:
---
# 类图
类图用于描述系统中所包含的类以及它们之间的相互关系，帮助人们简化对系统理解，它是系统分析和设计阶段的重要产物，也是系统编码和测试的重要模型依据。
# 类
类封装了数据和行为，是面向对象的重要组成部分，它是具有相同属性、操作、关系的对象集合的总称。在系统中每个类都具有一定的职责，职责指的是类要完成什么样的功能，要承担什么样的义务。一个类可以有多种职责，设计得好的类一般只有一种职责。在定义类的时候，将类的职责分解成类的属性和操作（方法）。类的属性即类的数据职责，类的操作即类的行为职责。设计类是面向对象设计中最重要的组成部分，也是最复杂和最耗时的部分。

在软件系统运行时，类将被实例化成为对象（Object）,对象对应于某个具体的事物，是类的实例（Instance）.
类图使用出现在系统中的不同类来描述系统的静态结构，它用于描述不同的类以及它们之间的关系。
在系统分析与设计阶段，类通常可以分为三种：实体类（Entity Class）、控制类（Control Class）、边界类（Boundary Class）
* 实体类
  实体类对应系统需求中每个实体，它们通常需要保存在永久的存储体中，一般使用数据库表或文件来记录。实体类包括存储和传递数据的类，还包括操作数据的类。实体类来源于需求中的名词，如学生、商品等。

* 控制类
  控制类用于体现应用程序的执行逻辑。提供相应的业务操作，将控制类抽角出来可以降低界面与数据库之间的耦合度。控制类一般由动宾结构的短语（动词+名词）转化来的名词。如增加商品对应有一个商品增加类，注册对应一个注册类等

* 边界类
  边界类用于对外部用户与系统之间的交互对象进行抽象，主要包括界面类，如对话框、窗口、菜单等

在面向对象分析与设计的初级阶段，通常首先识别出实体类，绘制出初始类图，此时的类图也可称为领域模型，包括实体类及它们之间的相互关系。

# 类的UML图示
在UML中，类使用包含类名、属性和操作且带有分隔线的长方形来表示：如定义一个Person类，它包含属性`name`,`age`,`phone`以及操作`walk()`,`speak()`,`eat()`在UML类图中该类如下图所示：
![]()
在`UML`类图中，类一般由三部臾组成：
* 类名： 每个类都必须有一个名字，类名是一个字符串
* 类的属性（Attributes）：属性指类的性质，即类的成员变量。 一个可以有任意多个属性，也可以没有属性。
  UML中规定属性的表示方式为：
  `可见性 名称 : 类型 [=缺省值]`
  * “可见性”表示该属性对于类外的元素是否可见。包括：公有`+`(Public)、私有`-`(Private)、和受保护`#`(protected),三种，在类图中分别用符号`+`,`-`,`#`表示
  * “名称”表示属性名，用一个字符串表示
  * “类型”表示属性的数据类型，可以是基本数据类型，也可以是用户自定义类型
  * “缺省值”是一个可选项，即属性的初始值

* 类的操作（Operations）:操作是类的任意一个实例对象都可以使用的行为，即类的成员方法。UML规定操作的表示方式为：
  `可见性 名称(参数列表):[:返回类型]`
  * “可见性”的定义与属性的可见性定义相同
  * “名称”即方法名，且一个字符串表示
  * “参数列表”表示方法的参数，其语法与属性的定义类似，参数的个数可以任意，多个参数之间用逗号隔“,”开
  * “返回类型”是一个可选项，表示方法的返回值，依赖于具体的编程语言，可以是基本数据类型，也可以是用户自定义类型，还可以是void类型


# 类与类之间的关系
## 关联关系
关联(Association)关系是类与类之间最常用的一种关系，它是一种结构化关系，用于表示一类对象与另一类对象之间有联系，如汽车与轮胎，师傅与徒弟，班级与学生。在UML类图中，使用实线连接有关联关系的对象所对应的类，通常将一个类的对象作为别一个类的成员变量。在使用类图表示关联关系时可以在关联线上标注角色名，一般敷衍表示两都之间关系的动名或名词表示角色名，关系的两端代表不同的角色。因此在一个关联关系中可以包含两个角色名，角色名不是必须的，可以根据需求增加，使类之间的关系更加明确
关联关系通常用包含以下几种形式：
* 双向关联
  默认情况下，关联是双向的。如顾客购买商品并拥有商品，反之，卖出去的商品总有某个顾客与之关联。因此顾客与商品之间具有双向关联关系
  ![双向关联实例](http://www.uml.org.cn/oobject/images/2012112315.jpg)
* 单向关联
  类的关联关系也可以是单向的，单向关联用带箭头的实线表示。如顾客拥有地址，则顾客类与地址类具有单向关联关系
  ![单向关联实例](http://www.uml.org.cn/oobject/images/2012112316.jpg)
* 自关联
  在系统中可能会存在一些类的属性对象类型为该类本身，这种特殊的关联关系称为自关联。例如：一个节点类(Node)的成员又是节点Node类型的对象，如图4所示：
  ![自关联实例](http://www.uml.org.cn/oobject/images/2012112317.jpg)
* 多重性关联
  多重性关联关系又称为重数性(Multiplicity)关联关系，表示两个关联对象在数量上的对应关系。在UML中，对象之间的多重性可以直接在关联直线上用一个数字或一个数字范围表示。
  对象之间可以存在多种多重性关联关系，常见的多重性表示方式如表1所示：
  表1 多重性表示方式列表

|表示方式|多重性说明|
|-------|--------|
|1..1|表示另一个类的一个对象只与该类的一个对象有关系|
|0..*|表示另一个类的一个对象与该类的零个或多个对象有关系|
|1..*|表示另一个类的一个对象与该类的一个或多个对象有关系|
|0..1|表示另一个类的一个对象没有或只与该类的一个对象有关系|
|m..n|表示另一个类的一个对象与该类最少m，最多n个对象有关系 (m≤n)|
例如：一个界面(Form)可以拥有零个或多个按钮(Button)，但是一个按钮只能属于一个界面，因此，一个Form类的对象可以与零个或多个Button类的对象相关联，但一个Button类的对象只能与一个Form类的对象关联，如图5所示：
![多重性关联实例]()

* 聚合关系
  聚合(Aggregation)关系表示整体与部分的关系。在聚合关系中，成员对象是整体对象的一部分，但是成员对象可以脱离整体对象独立存在。在UML中，聚合关系用带空心菱形的直线表示。例如：汽车发动机(Engine)是汽车(Car)的组成部分，但是汽车发动机可以独立存在，因此，汽车和发动机是聚合关系，如图6所示：
  ![聚合关系实例](http://www.uml.org.cn/oobject/images/2012112319.jpg)
* 组合关系
  组合(Composition)关系也表示类之间整体和部分的关系，但是在组合关系中整体对象可以控制成员对象的生命周期，一旦整体对象不存在，成员对象也将不存在，成员对象与整体对象之间具有同生共死的关系。在UML中，组合关系用带实心菱形的直线表示。例如：人的头(Head)与嘴巴(Mouth)，嘴巴是头的组成部分之一，而且如果头没了，嘴巴也就没了，因此头和嘴巴是组合关系，如图7所示：
  ![组合关系实例](http://www.uml.org.cn/oobject/images/20121123110.jpg)

## 依赖关系
依赖(Dependency)关系是一种使用关系，特定事物的改变可能会影响到使用该事物的其他事物，在需要表示一个事物使用另一个事物时使用依赖关系。大多数情况下依赖关系体现在某人类的方法使用了另外一个类的对象作为参数。在UML中，依赖关系用带箭头的虚线表示，由依赖的一方指向被依赖的一方。例如：驾驶员开车，在Driver类的drive()方法中将Car类型的对象car作为一个参数传递，以便在drive()方法中能够调用car的move()方法，且驾驶员的drive()方法依赖车的move()方法，因此类Driver依赖类Car，如图1所示：
![依赖关系实例](http://www.uml.org.cn/oobject/images/20121123111.jpg)

## 泛化关系
泛化(Generalization)关系也是继承关系，用于描父类与子类的关系。父类又称基类或超类，子类又称派生类。在UML中，泛化关系用带空心的三角形直线表示。
## 接口与实现关系
在很多面向对象语言中都引入了接口的概念，如Java、C#等，在接口中，通常没有属性，而且所有的操作都是抽象的，只有操作的声明，没有操作的实现。UML中用与类的表示法类似的方式表示接口。
接口之间也可以有与类之间关系类似的继承关系和依赖关系，但是接口和类之间还存在一种实现(Realization)关系，在这种关系中，类实现了接口，类中的操作实现了接口中所声明的操作。在UML中，类与接口之间的实现关系用带空心三角形的虚线来表示